\doxysection{Opc\+Server.\+cpp}
\hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source}{}\label{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source}\index{C++/samples/server/SoftingServer/src/XXOPC/OpcServer.cpp@{C++/samples/server/SoftingServer/src/XXOPC/OpcServer.cpp}}
\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}stdafx.h"{}}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h}{OpcServer.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_server_common_8h}{ServerCommon.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00004}00004\ \textcolor{comment}{//\ version\ info}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_o_p_c_ver_prod_8h}{OPCVerProd.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00006}00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_build_nr_8h}{BuildNr.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00008}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a7a95f37fff8ba67d8ef16c45c3cebd41}{00008}}\ \mbox{\hyperlink{class_opc_server}{OpcServer}}*\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a7a95f37fff8ba67d8ef16c45c3cebd41}{instance}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00009}00009\ \mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application}{SoftingOPCToolboxServer::Application}}*\ SoftingOPCToolboxServer::Application::m\_instance\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00011}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a0d3914c6558622679cbedcf425fffdb6}{00011}}\ \textcolor{preprocessor}{\#define\ RUNNING\_EVENT\_NAME\ \ \_T("{}Global\(\backslash\)\(\backslash\)Softing\_XX\_RunEvent"{})}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00012}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a379062fa3967a55e54d24a737d17913d}{00012}}\ \textcolor{preprocessor}{\#define\ DEMO\_EVENT\_NAME\ \ \ \ \ \_T("{}Global\(\backslash\)\(\backslash\)Softing\_XX\_DemoEvent"{})}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00014}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a4ea63914f27f67f6ce9cbf41a6558d5c}{00014}}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a4ea63914f27f67f6ce9cbf41a6558d5c}{CATEGORY\_ID\_SIMULATION}}\ \ =\ 1;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00015}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a86515d7019b219de648e66b1c334ce58}{00015}}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a86515d7019b219de648e66b1c334ce58}{ATTRIBUTE\_ID\_SIMULATION}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00017}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a345f92ed4d179fc11dc6711d0016c04c}{00017}}\ \mbox{\hyperlink{class_opc_server}{OpcServer}}*\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a345f92ed4d179fc11dc6711d0016c04c}{getOpcServer}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00018}00018\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00019}00019\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a7a95f37fff8ba67d8ef16c45c3cebd41}{instance}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00020}00020\ \}\ \ \ \textcolor{comment}{//\ \ end\ getOpcServer}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00023}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a0e05ccf5cc0cd7f740ff64344c3ed3cb}{00023}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a0e05ccf5cc0cd7f740ff64344c3ed3cb}{createOpcServer}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00024}00024\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00025}00025\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a7a95f37fff8ba67d8ef16c45c3cebd41}{instance}}\ ==\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00026}00026\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00027}00027\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a7a95f37fff8ba67d8ef16c45c3cebd41}{instance}}\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_opc_server}{OpcServer}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00028}00028\ \ \ \ \ \}\ \ \ \textcolor{comment}{//\ \ end\ if}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00029}00029\ \}\ \ \ \textcolor{comment}{//\ \ end\ createOpcServer}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00032}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_ab9b5b8cffa3ce949c4ea9a9c130f76b2}{00032}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_ab9b5b8cffa3ce949c4ea9a9c130f76b2}{destroyOpcServer}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00033}00033\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00034}00034\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a7a95f37fff8ba67d8ef16c45c3cebd41}{instance}}\ !=\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00035}00035\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00036}00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a7a95f37fff8ba67d8ef16c45c3cebd41}{instance}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00037}00037\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a7a95f37fff8ba67d8ef16c45c3cebd41}{instance}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00038}00038\ \ \ \ \ \}\ \ \ \textcolor{comment}{//\ \ end\ if}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00039}00039\ \}\ \ \ \textcolor{comment}{//\ \ end\ destroyOpcServer}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00042}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_aa65a4305c98ad7376fdeaddf98f0f6d8}{00042}}\ \textcolor{keywordtype}{long}\ API\_CALL\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_aa65a4305c98ad7376fdeaddf98f0f6d8}{HandleShutdownRequest}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00043}00043\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00044}00044\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_o_tcommon_8h_a14bc2dfa42241600d567369cd25ddc70}{S\_OK}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00045}00045\ \}\ \ \ \textcolor{comment}{//end\ HandleShutdownRequest}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00048}00048\ \mbox{\hyperlink{class_opc_server_a2099deab73c5075fd31c91188e2f0021}{OpcServer::OpcServer}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00049}00049\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00050}00050\ \ \ \ \ m\_pIOManager\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_i_o_manager}{IOManager}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00051}00051\ \ \ \ \ m\_pDaSimulationElement\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00052}00052\ \ \ \ \ m\_license\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00053}00053\ \ \ \ \ m\_shownDemoElapsed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00054}00054\ \ \ \ \ m\_serverRunningEvent\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00055}00055\ \ \ \ \ m\_serverDemoEvent\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00056}00056\ \ \ \ \ m\_licenseUpdateTimer\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00057}00057\ \}\ \ \ \textcolor{comment}{//\ \ end\ constructor}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00060}00060\ \mbox{\hyperlink{class_opc_server_a3d59543a9c6e0d7ef86deaac775f7843}{OpcServer::\string~OpcServer}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00061}00061\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00062}00062\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pIOManager)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00063}00063\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00064}00064\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ m\_pIOManager;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00065}00065\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00066}00066\ \}\ \ \ \textcolor{comment}{//\ \ end\ destructor}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00069}00069\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_ac4be59d86873133f063fa3092abcfd29}{OpcServer::initialize}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00070}00070\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00071}00071\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a98ab74f9959d9c8c7d6331dded5590b9}{setVersionOtb}}(447);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00072}00072\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a9ee0bd55798adfdf117ec6058b1dafe5}{setAppType}}(\mbox{\hyperlink{namespace_softing_o_p_c_toolbox_server_a6efeeee8f1e4c61a47fd053c28f01617ad19eb208289e575b24c668dfdfb0d9f0}{EnumApplicationType\_EXECUTABLE}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00073}00073\ \ \ \ \ \textcolor{comment}{//\ TODO:\ change\ DA\ CLSID\ for\ each\ new\ Softing\ server}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00074}00074\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a3fc52076b51e43312d6a20d816db7ece}{setClsidDa}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}\{D3F17B86-\/8312-\/4446-\/A61E-\/19518789DF2B\}"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00075}00075\ \ \ \ \ \textcolor{comment}{//\ TODO:\ replace\ XXX\ with\ the\ server\ name\ (e.g.\ S7,\ PROFIBUS,\ FF)}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00076}00076\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_ab781cba0bcd55d50041248ca11dbbf1e}{setProgIdDa}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Softing.OPC.XX.DA"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00077}00077\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a3d26c1bdd2faf99b06efd58b0812bee3}{setVerIndProgIdDa}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Softing.OPC.XX.DA.1"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00078}00078\ \ \ \ \ \textcolor{comment}{//\ TODO:\ change\ AE\ CLSID\ for\ each\ new\ Softing\ server}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00079}00079\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a0099fde7ddc238cc5565127d86a226a1}{setClsidAe}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}\{9DF71F76-\/9F07-\/4928-\/805E-\/561041AE5EA8\}"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00080}00080\ \ \ \ \ \textcolor{comment}{//\ TODO:\ replace\ XXX\ with\ the\ server\ name\ (e.g.\ S7,\ PB,\ FF)}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00081}00081\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_af74e0450bd36fb38b2ab8ce09ef47e50}{setProgIdAe}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Softing.OPC.XX.AE"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00082}00082\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_add41b2a4352b67cd64f04fe92f05c4bc}{setVerIndProgIdAe}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Softing.OPC.XX.AE.1"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00083}00083\ \ \ \ \ \textcolor{comment}{//\ TODO:\ replace\ XXX\ with\ the\ server\ name\ (e.g.\ S7,\ PROFIBUS,\ FF)}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00084}00084\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_ad21d9c9ede8561a8f100b932446f6424}{setDescription}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Softing\ XX\ OPC\ Server"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00085}00085\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a955b6906d8695aad3a688b3ed5e70a81}{setMajorVersion}}(\mbox{\hyperlink{_o_p_c_ver_prod_8h_a19d815a53e6be39ee6b7f9df6115bec8}{PROD\_VER\_MAJOR}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00086}00086\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a01f9a0abcbe547520bfcd9511765a650}{setMinorVersion}}(\mbox{\hyperlink{_o_p_c_ver_prod_8h_ad69655c489df0b2dac763e9d3fc0be93}{PROD\_VER\_MINOR}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00087}00087\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_aa35904ad9ac6289ea993eb5b67937f2b}{setPatchVersion}}(\mbox{\hyperlink{_o_p_c_ver_prod_8h_a3e3780d16ec550720bdec00d71a5ac36}{PROD\_VER\_SERVP}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00088}00088\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_af545dc778eefb797ec896ecc72f47f5b}{setBuildNumber}}(\mbox{\hyperlink{_build_nr_8h_a612fab246e45d70d2d1cb513adbe38d7}{PRODUCT\_BUILD}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00089}00089\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_af198b4cecdbed4ab59b9dcc4c01f96b1}{setVendorInfo}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Softing\ Industrial\ Automation\ GmbH"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00090}00090\ \ \ \ \ \textcolor{comment}{//\ TODO:\ check\ for\ the\ correct\ minimal\ update\ rate}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00091}00091\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a63012a9f33cb0ba2cd516ef5591703ca}{setMinUpdateRateDa}}(50);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00092}00092\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a4e5b8eef3a3d19ef25f6963837873643}{setClientCheckPeriod}}(30000);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00093}00093\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a873a5d2f09306d759fdd373c1ccb77c4}{setAddressSpaceDelimiter}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{charliteral}{'.'}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00094}00094\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_aefa03b55f2f8db1c687778f71d3b5e35}{setPropertyDelimiter}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{charliteral}{'|'}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00095}00095\ \ \ \ \ \textcolor{comment}{//\ TODO:\ change\ the\ HTTP\ IP\ port\ to\ the\ one\ assigned\ for\ the\ new\ server}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a8eb609d6a9cd5cb4ae8515faa7c57cad}{setIpPortHTTP}}(8099);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00097}00097\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_ae83268ce4f7442253e1a2efbac8227e8}{setUrlDa}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}/OPC/DA"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00098}00098\ \ \ \ \ \textcolor{comment}{//\ TODO:\ change\ the\ TP\ IP\ port\ 0\ which\ is\ the\ default\ for\ all\ Softing\ servers}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00099}00099\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_af1ba19cc86e7c6a4dccf8b4f6ae51a33}{setTpPort}}(55678);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00100}00100\ \ \ \ \ \textcolor{comment}{//\ TODO:\ get\ the\ trace\ settings\ from\ the\ configuration}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00101}00101\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a6eeee35e68fccb566ddea94a74f4e1ec}{enableTracing}}(}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00102}00102\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_trace_8h_a0a9b47e17f7a037741a09af10ed674b5aee9a36142dfd29ef521abd7367fa3766}{EnumTraceGroup\_ALL}},}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00103}00103\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_trace_8h_a0a9b47e17f7a037741a09af10ed674b5aee9a36142dfd29ef521abd7367fa3766}{EnumTraceGroup\_ALL}},}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00104}00104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_trace_8h_a0a9b47e17f7a037741a09af10ed674b5afa62febd149a11d219f2a70a3b8097d1}{EnumTraceGroup\_NOTHING}},}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00105}00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_trace_8h_a0a9b47e17f7a037741a09af10ed674b5afa62febd149a11d219f2a70a3b8097d1}{EnumTraceGroup\_NOTHING}},}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00106}00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Trace.txt"{}}),}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00107}00107\ \ \ \ \ \ \ \ \ 1000000,}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00108}00108\ \ \ \ \ \ \ \ \ 2);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00109}00109\ \ \ \ \ \textcolor{comment}{//\ TODO:\ get\ TP\ credentials\ from\ the\ configuration}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00110}00110\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00111}00111\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::vector<tstring>\ tpUsers;}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00112}00112\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::vector<tstring>\ tpPaswords;}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00113}00113\ \textcolor{comment}{\ \ \ \ \ \ \ \ tpUsers.push\_back(\_T("{}Softing"{}));}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00114}00114\ \textcolor{comment}{\ \ \ \ \ \ \ \ tpPasswords.push\_back(\_T("{}Softing"{}));}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00115}00115\ \textcolor{comment}{\ \ \ \ \ \ \ \ getApp()-\/>addTpCredentials(tpUsers,\ tpPasswords);}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00116}00116\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00117}00117\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a9a99e1fcf016581b27bc166798a2e2e2}{setSupportDisableConditions}}(\textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00118}00118\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_o_tcommon_8h_a14bc2dfa42241600d567369cd25ddc70}{S\_OK}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00119}00119\ \}\ \ \ \textcolor{comment}{//\ \ end\ initialize}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00121}00121\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00122}00122\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_opc_server_a9195c5fd494b2e826f385586c1f06c87}{OpcServer::setServiceName}}(\mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\ serviceName)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00123}00123\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00124}00124\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a4c960b9f4d6a86121261d58a810e1def}{setServiceName}}(serviceName);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00125}00125\ \}\ \ \ \textcolor{comment}{//\ \ end\ setServiceName}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00127}00127\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00128}00128\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_a168a6358d61e988e1d65a25b449907a6}{OpcServer::prepare}}(\mbox{\hyperlink{class_my_creator}{MyCreator}}*\ creator)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00129}00129\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00130}00130\ \ \ \ \ \textcolor{keywordtype}{long}\ result\ =\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a4cccd8686527a5d6cacc3636f6626ef0}{initialize}}(creator);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00132}00132\ \ \ \ \ \mbox{\hyperlink{class_opc_server_a6a795d91f48991b93fdecafa410aecee}{checkLicense}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00133}00133\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00134}00134\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_opc_server_ad9538b59a9b2436a94d06d9b0dbed165}{isLicensed}}())}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00135}00135\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00136}00136\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ license\ -\/>\ 90\ minutes\ demo\ version}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00137}00137\ \ \ \ \ \ \ \ \ m\_startTimeDemoMode.\mbox{\hyperlink{class_date_time_aa70ef82da8b39a333d7c0256ef6c1bfc}{now}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00138}00138\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a1c3eee898c6599c9b418a01c811962ca}{forceDemoVersion}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00139}00139\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00141}00141\ \ \ \ \ m\_licenseUpdateTimer\ =\ SetTimer(NULL,\ 0,\ 900010,\ \mbox{\hyperlink{class_opc_server_ac2c61959cf245f59f84ede3a8dcb675f}{OpcServer::updateLicenseTimerProc}});\ \textcolor{comment}{//\ update\ license\ every\ 15\ minutes}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00142}00142\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00143}00143\ \}\ \ \ \textcolor{comment}{//\ \ end\ prepare}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00144}00144\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00145}00145\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_abfcccbc2c8ec06ff11f81218151d0750}{OpcServer::start}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00146}00146\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00147}00147\ \ \ \ \ \textcolor{keywordtype}{long}\ ret;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00148}00148\ \ \ \ \ ret\ =\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_ae7f21db892e952f0af9915061424e36a}{start}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00150}00150\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{_o_tcommon_8h_a1eff4fb052d6e497649f6a06b4ac222a}{SUCCEEDED}}(ret))}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00151}00151\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00152}00152\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ allow\ everyone\ to\ access\ the\ event}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00153}00153\ \ \ \ \ \ \ \ \ SECURITY\_DESCRIPTOR\ sd;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00154}00154\ \ \ \ \ \ \ \ \ InitializeSecurityDescriptor(\&sd,\ SECURITY\_DESCRIPTOR\_REVISION);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00155}00155\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_not_quite_null_dacl}{NotQuiteNullDacl}}\ Dacl;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00156}00156\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00157}00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Dacl.\mbox{\hyperlink{class_not_quite_null_dacl_a90c98b21463366b03a5fe1cbd96770c9}{Create}}())}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00158}00158\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ SetSecurityDescriptorDacl(\&sd,\ TRUE,\ Dacl.\mbox{\hyperlink{class_not_quite_null_dacl_a7772f68b70c2743e442c0aef94ca0aea}{GetPDACL}}(),\ FALSE);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00160}00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00161}00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00162}00162\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ SetSecurityDescriptorDacl(\&sd,\ TRUE,\ 0,\ FALSE);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00164}00164\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00165}00165\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00166}00166\ \ \ \ \ \ \ \ \ SECURITY\_ATTRIBUTES\ sa\ =\ \{\textcolor{keyword}{sizeof}\ sa,\ \&sd,\ FALSE\};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00167}00167\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ create\ running\ event}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00168}00168\ \ \ \ \ \ \ \ \ m\_serverRunningEvent\ =\ CreateEvent(\&sa,\ FALSE,\ FALSE,\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a0d3914c6558622679cbedcf425fffdb6}{RUNNING\_EVENT\_NAME}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00169}00169\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00170}00170\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00171}00171\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00172}00172\ \}\ \ \ \textcolor{comment}{//\ \ end\ start}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00173}00173\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00174}00174\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_acf701752108f115b511cfbfbbe1e0fe5}{OpcServer::ready}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00175}00175\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00176}00176\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_aebcb014625b125d7db9fa6d50d0f23fa}{ready}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00177}00177\ \}\ \ \ \textcolor{comment}{//\ \ end\ ready}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00178}00178\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00179}00179\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_ad8226cbba4c503abd4fae86496d45771}{OpcServer::stop}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00180}00180\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00181}00181\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a223bbcc4d2671fa0568a7baaff7d0a6d}{stop}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00182}00182\ \}\ \ \ \textcolor{comment}{//\ \ end\ stop}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00184}00184\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_a0594d3845dfea1226ab98d13a75ae644}{OpcServer::terminate}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00185}00185\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00186}00186\ \ \ \ \ \textcolor{keywordtype}{long}\ result\ =\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_aa5a667ee3fda6f7dc7901c8a573e637f}{terminate}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00187}00187\ \ \ \ \ \mbox{\hyperlink{_c_09_09_2samples_2server_2_console_2_console_8cpp_a2060b34e75c7c7a67c512e8f5cdee28d}{releaseApp}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00188}00188\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00189}00189\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_serverRunningEvent)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00190}00190\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00191}00191\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_c_09_09_2samples_2client_2_d_a_console___multi_thread_2_console_8cpp_aad124efc201206832cfe0875ec224228}{CloseHandle}}(m\_serverRunningEvent);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00192}00192\ \ \ \ \ \ \ \ \ m\_serverRunningEvent\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00193}00193\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00195}00195\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_serverDemoEvent)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00196}00196\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00197}00197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_c_09_09_2samples_2client_2_d_a_console___multi_thread_2_console_8cpp_aad124efc201206832cfe0875ec224228}{CloseHandle}}(m\_serverDemoEvent);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00198}00198\ \ \ \ \ \ \ \ \ m\_serverDemoEvent\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00199}00199\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00201}00201\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_licenseUpdateTimer)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00202}00202\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00203}00203\ \ \ \ \ \ \ \ \ KillTimer(NULL,\ m\_licenseUpdateTimer);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00204}00204\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00205}00205\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00206}00206\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00207}00207\ \}\ \ \ \textcolor{comment}{//\ \ end\ terminate}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00208}00208\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00209}00209\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_a3ee1c147512abd50a3c290489bf614eb}{OpcServer::processCommandLine}}(\mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\ command)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00210}00210\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00211}00211\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a679f3c3660f814f5d94943e4bce93152}{processCommandLine}}(command);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00212}00212\ \}\ \ \ \textcolor{comment}{//\ \ end\ processCommandLine}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00214}00214\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00215}00215\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_a0aea6f4066ede1c9dfbb1db065e8572d}{OpcServer::buildAddressSpace}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00216}00216\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00217}00217\ \ \ \ \ \textcolor{comment}{//\ TODO:\ replace\ address\ space\ creation}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00218}00218\ \ \ \ \ \mbox{\hyperlink{class_my_creator}{MyCreator}}*\ creator\ =\ (\mbox{\hyperlink{class_my_creator}{MyCreator}}*)\mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_aee66c4691aa9a434e23b9fbdcbd09331}{getCreator}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00219}00219\ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\ aName;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00220}00220\ \ \ \ \ \textcolor{comment}{//\ \ DA}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00221}00221\ \ \ \ \ \mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_da_address_space_root}{DaAddressSpaceRoot}}*\ daRoot\ =\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a94330631320257cc39885b2e6045017e}{getDaAddressSpaceRoot}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00222}00222\ \ \ \ \ m\_pDaSimulationElement\ =\ (\mbox{\hyperlink{class_my_da_address_space_element}{MyDaAddressSpaceElement}}*)creator-\/>\mbox{\hyperlink{class_my_creator_a6203b2bed0cdd9b70f0e4ba7a990e0a4}{createMyDaAddressSpaceElement}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00223}00223\ \ \ \ \ aName\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Simulation"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00224}00224\ \ \ \ \ m\_pDaSimulationElement-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_address_space_element_a411a3b6f141df7e5b82493124a83062d}{setName}}(aName);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00225}00225\ \ \ \ \ m\_pDaSimulationElement-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_da_address_space_element_af03f4801e62488a108aa9231b7af80fe}{setAccessRights}}(\mbox{\hyperlink{_enums_8h_a7158711b526059c2ea8a9f0336fdb8d7a84f25bb908d02b538044a8beaf7258ec}{EnumAccessRights\_READWRITEABLE}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00226}00226\ \ \ \ \ m\_pDaSimulationElement-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_da_address_space_element_a828857baadd7f81559b285fc4e11150b}{setDatatype}}(VT\_I4);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00227}00227\ \ \ \ \ m\_pDaSimulationElement-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_da_address_space_element_accbd74d0f897040fcf31e1a9fc848415}{setIoMode}}(\mbox{\hyperlink{namespace_softing_o_p_c_toolbox_server_a9283d23f6ea26ae9a06afac08a79b55ea2b4b07bd912d2f18fd1eac2fe558324f}{EnumIoMode\_REPORT\_CYCLIC}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00228}00228\ \ \ \ \ daRoot-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_address_space_root_a9f0c0d7fecc65716596bb77b12fde915}{addChild}}(m\_pDaSimulationElement);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00229}00229\ \ \ \ \ \mbox{\hyperlink{class_date_time}{DateTime}}\ \mbox{\hyperlink{_c_09_09_2samples_2server_2_update_mode_2_console_8cpp_ac023874b2154eac7297a7575008605fe}{now}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00230}00230\ \ \ \ \ \mbox{\hyperlink{class_variant}{Variant}}\ aVariant(rand());}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00231}00231\ \ \ \ \ \mbox{\hyperlink{class_value_q_t}{ValueQT}}\ value(aVariant,\ \mbox{\hyperlink{_enums_8h_a77190d10873ef4dcc55c0d2d6e7f81a9a0048672c289abff095b5a7d75c85a061}{EnumQuality\_GOOD}},\ \mbox{\hyperlink{_c_09_09_2samples_2server_2_update_mode_2_console_8cpp_ac023874b2154eac7297a7575008605fe}{now}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00232}00232\ \ \ \ \ m\_pDaSimulationElement-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_da_address_space_element_aaf4f78f4210acb28a7a7fab7a49662d9}{valueChanged}}(value);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00233}00233\ \ \ \ \ \textcolor{comment}{//\ \ AE}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00234}00234\ \ \ \ \ \mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_ae_address_space_root}{AeAddressSpaceRoot}}*\ aeRoot\ =\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_aebdcdab11a57f2d19fc56d06c3060bef}{getAeAddressSpaceRoot}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00235}00235\ \ \ \ \ \mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_ae_address_space_element}{AeAddressSpaceElement}}*\ aeElement\ =\ creator-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_creator_aace58143da5a626ec71581447247c83b}{createAeAddressSpaceElement}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00236}00236\ \ \ \ \ aName\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}SimulationElement"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00237}00237\ \ \ \ \ aeElement-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_address_space_element_a411a3b6f141df7e5b82493124a83062d}{setName}}(aName);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00238}00238\ \ \ \ \ aeElement-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_address_space_element_a75c34c4bcbcd5cdcd36ecb66a1babc76}{setHasChildren}}(FALSE);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00239}00239\ \ \ \ \ aeRoot-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_address_space_root_a9f0c0d7fecc65716596bb77b12fde915}{addChild}}(aeElement);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00240}00240\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_o_tcommon_8h_a14bc2dfa42241600d567369cd25ddc70}{S\_OK}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00241}00241\ \}\ \ \ \textcolor{comment}{//\ \ end\ buildAddressSpace}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00242}00242\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00243}00243\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_opc_server_ade1fe14c4005ee7166cac688315ba388}{OpcServer::buildEventCategories}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00244}00244\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00245}00245\ \ \ \ \ \textcolor{comment}{//\ TODO:\ replace\ event\ categories\ creation}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00246}00246\ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\ categoryName(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}SimulationCategory"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00247}00247\ \ \ \ \ \mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_ae_category}{AeCategory}}*\ simulationCategory\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_ae_category}{AeCategory}}(\mbox{\hyperlink{_enums_8h_a6ad1cc8a319f2d2b22e009ab5a028495a7b49b5afe42292e56b2c9902ab689f83}{EnumEventType\_SIMPLE}},\ \mbox{\hyperlink{_server_d_l_l_2_opc_project_2_opc_server_8cpp_a4ea63914f27f67f6ce9cbf41a6558d5c}{CATEGORY\_ID\_SIMULATION}},\ categoryName);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00248}00248\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_aed599d4c931f72890259fd0826f6bfd8}{addAeCategory}}(simulationCategory);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00249}00249\ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\ attributeName(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}SimulationAttribute"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00250}00250\ \ \ \ \ simulationCategory-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_ae_category_ae4afbba8830811f1ed99bca00efabc34}{addAttribute}}(\mbox{\hyperlink{_server_d_l_l_2_opc_project_2_opc_server_8cpp_a86515d7019b219de648e66b1c334ce58}{ATTRIBUTE\_ID\_SIMULATION}},\ attributeName,\ VT\_UI2);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00251}00251\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_o_tcommon_8h_a14bc2dfa42241600d567369cd25ddc70}{S\_OK}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00252}00252\ \}\ \ \ \textcolor{comment}{//\ \ end\ buildEventCategories}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00253}00253\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00254}00254\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00255}00255\ \textcolor{comment}{//\ TODO:\ remove\ simulation\ which\ starts\ here\ >>>}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00256}00256\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00257}00257\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_opc_server_a3c435a8b243fece46a1dc4b68cb9c7e9}{OpcServer::fireSimulationEvents}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00258}00258\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00259}00259\ \ \ \ \ \textcolor{comment}{//\ simple\ events}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00260}00260\ \ \ \ \ std::vector<AeEvent*>\ events;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00261}00261\ \ \ \ \ std::vector<Variant>\ attributeValues;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00262}00262\ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\ message;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00263}00263\ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\ anActorID;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00264}00264\ \ \ \ \ \mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_ae_event}{AeEvent}}\ simulationEvent(\mbox{\hyperlink{_enums_8h_a6ad1cc8a319f2d2b22e009ab5a028495a7b49b5afe42292e56b2c9902ab689f83}{EnumEventType\_SIMPLE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}SimulationElement"{}})),\ \mbox{\hyperlink{_server_d_l_l_2_opc_project_2_opc_server_8cpp_a4ea63914f27f67f6ce9cbf41a6558d5c}{CATEGORY\_ID\_SIMULATION}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00265}00265\ \ \ \ \ simulationEvent.setSeverity(10);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00266}00266\ \ \ \ \ anActorID\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}OpcUser"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00267}00267\ \ \ \ \ simulationEvent.setActorId(anActorID);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00268}00268\ \ \ \ \ message\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Simulation\ event\ generated"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00269}00269\ \ \ \ \ simulationEvent.setMessage(message);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00270}00270\ \ \ \ \ \mbox{\hyperlink{class_variant}{Variant}}\ randomValue(::rand());}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00271}00271\ \ \ \ \ attributeValues.push\_back(randomValue);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00272}00272\ \ \ \ \ simulationEvent.setAttributeValueList(attributeValues);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00273}00273\ \ \ \ \ events.push\_back(\&simulationEvent);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00274}00274\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a983f306d67badfafe3d15c2b6cad716a}{fireEvents}}(events);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00275}00275\ \}\ \ \ \textcolor{comment}{//\ \ end\ fireEvents}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00276}00276\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00277}00277\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00278}00278\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_opc_server_af86ee99a2eadb996d28a809ad798c9a6}{OpcServer::changeSimulationValues}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00279}00279\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00280}00280\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pDaSimulationElement\ !=\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00281}00281\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00282}00282\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_date_time}{DateTime}}\ \mbox{\hyperlink{_c_09_09_2samples_2server_2_update_mode_2_console_8cpp_ac023874b2154eac7297a7575008605fe}{now}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00283}00283\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_variant}{Variant}}\ aVariant(::rand());}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00284}00284\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_value_q_t}{ValueQT}}\ value(aVariant,\ \mbox{\hyperlink{_enums_8h_a77190d10873ef4dcc55c0d2d6e7f81a9a0048672c289abff095b5a7d75c85a061}{EnumQuality\_GOOD}},\ \mbox{\hyperlink{_c_09_09_2samples_2server_2_update_mode_2_console_8cpp_ac023874b2154eac7297a7575008605fe}{now}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00285}00285\ \ \ \ \ \ \ \ \ m\_pDaSimulationElement-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_da_address_space_element_aaf4f78f4210acb28a7a7fab7a49662d9}{valueChanged}}(value);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00286}00286\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00287}00287\ \}\ \ \ \textcolor{comment}{//\ \ end\ changeSimulationValues}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00289}00289\ \textcolor{comment}{//\ TODO:\ remove\ simulation\ which\ ends\ here\ <<<}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00290}00290\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00291}00291\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{OpcServer::trace}}(}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00292}00292\ \ \ \ \ \mbox{\hyperlink{_trace_8h_a02dbd1090ea4d03998aaf568c7ded9fc}{EnumTraceLevel}}\ aLevel,}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00293}00293\ \ \ \ \ \mbox{\hyperlink{_trace_8h_ad2725a11430348ec412e72b436f03bff}{EnumTraceGroup}}\ aMask,}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00294}00294\ \ \ \ \ TCHAR*\ anObjectID,}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00295}00295\ \ \ \ \ TCHAR*\ aMessage,}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00296}00296\ \ \ \ \ ...)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00297}00297\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00298}00298\ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a6e909b5080e8db78d7f2c133687c0f75}{trace}}(aLevel,\ aMask,\ anObjectID,\ aMessage);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00299}00299\ \}\ \ \ \textcolor{comment}{//\ \ end\ trace}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00300}00300\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00301}00301\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00302}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_ad853a0173c0c873c35ee86f466edae10}{00302}}\ \textcolor{preprocessor}{\#define\ SLIC\_OK\ \ \ \ \ 0}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00303}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_adc5e390b7ffd011f33ebecb1c2fdb501}{00303}}\ \textcolor{preprocessor}{\#define\ SPROD\_XX\_OPC\_SERVER\ 0}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00304}\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_aaf1f7b6acafbef3c53f7b8155ac6e734}{00304}}\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_aaf1f7b6acafbef3c53f7b8155ac6e734}{long}}(\_stdcall\ \_SLIC\_GetLicenseForProduct)(\textcolor{keywordtype}{long}\ prodNum,\ \textcolor{keywordtype}{long}*\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a6271feae24ab07ca7fc74d9204299e2f}{pFeatureBits}},\ \textcolor{keywordtype}{long}*\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_ac7b2324a48478cc957761da9a09026ad}{pHoursLeft}},\ \textcolor{keywordtype}{long}*\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a2a3f444fe93c645c3bfcbfe06d6ad817}{pLicMedia}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00305}00305\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00306}\mbox{\hyperlink{class_opc_server_a6a795d91f48991b93fdecafa410aecee}{00306}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_opc_server_a6a795d91f48991b93fdecafa410aecee}{OpcServer::checkLicense}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00307}00307\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00308}00308\ \ \ \ \ \textcolor{comment}{//\ check\ license}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00309}00309\ \ \ \ \ \textcolor{keyword}{static}\ HMODULE\ licDLLInstance;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00311}00311\ \ \ \ \ \textcolor{keywordflow}{if}\ (licDLLInstance\ ==\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00312}00312\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00313}00313\ \ \ \ \ \ \ \ \ licDLLInstance\ =\ LoadLibrary(\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}fc\_slbase20.dll"{}}));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00314}00314\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00315}00315\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00316}00316\ \ \ \ \ \textcolor{keywordflow}{if}\ (licDLLInstance\ ==\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00317}00317\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00318}00318\ \ \ \ \ \ \ \ \ m\_license\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00319}00319\ \ \ \ \ \ \ \ \ m\_licInfoE\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}ERROR:\ Unable\ to\ load\ license\ DLL."{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00320}00320\ \ \ \ \ \ \ \ \ m\_licInfoG\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}ERROR:\ Lizenz-\/DLL\ konnte\ nicht\ geladen\ werden."{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00321}00321\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfba01cb27a81a1ad4dda1bc8ce25122c625}{EnumTraceLevel\_ERR}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Unable\ to\ load\ license\ DLL."{}})));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00322}00322\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_license;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00323}00323\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00324}00324\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00325}00325\ \ \ \ \ \textcolor{keyword}{static}\ \_SLIC\_GetLicenseForProduct*\ SLIC\_GetLicenseForProduct;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00326}00326\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00327}00327\ \ \ \ \ \textcolor{keywordflow}{if}\ (SLIC\_GetLicenseForProduct\ ==\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00328}00328\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00329}00329\ \ \ \ \ \ \ \ \ SLIC\_GetLicenseForProduct\ =\ (\_SLIC\_GetLicenseForProduct*)GetProcAddress(licDLLInstance,\ \textcolor{stringliteral}{"{}SLIC\_GetLicenseForProduct"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00330}00330\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00331}00331\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00332}00332\ \ \ \ \ \textcolor{keywordflow}{if}\ (SLIC\_GetLicenseForProduct\ ==\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00333}00333\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00334}00334\ \ \ \ \ \ \ \ \ m\_license\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00335}00335\ \ \ \ \ \ \ \ \ m\_licInfoE\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}ERROR:\ Unable\ to\ locate\ entry\ point\ in\ license\ DLL."{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00336}00336\ \ \ \ \ \ \ \ \ m\_licInfoG\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}ERROR:\ Einsprungspunkt\ in\ Lizenz-\/DLL\ konnte\ nicht\ gefunden\ werden."{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00337}00337\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfba01cb27a81a1ad4dda1bc8ce25122c625}{EnumTraceLevel\_ERR}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Unable\ to\ locate\ entry\ point\ in\ license\ DLL."{}})));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00338}00338\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_license;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00339}00339\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00340}00340\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00341}00341\ \ \ \ \ LONG\ featureBits\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00342}00342\ \ \ \ \ LONG\ hoursLeft\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00343}00343\ \ \ \ \ LONG\ licMedia\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00344}00344\ \ \ \ \ LONG\ lic\ =\ SLIC\_GetLicenseForProduct(\mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_adc5e390b7ffd011f33ebecb1c2fdb501}{SPROD\_XX\_OPC\_SERVER}},\ \&featureBits,\ \&hoursLeft,\ \&licMedia);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00345}00345\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00346}00346\ \ \ \ \ \textcolor{keywordflow}{if}\ (lic\ ==\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_ad853a0173c0c873c35ee86f466edae10}{SLIC\_OK}})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00347}00347\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00348}00348\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ have\ a\ valid\ temporary\ license\ or\ a\ full\ license}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00349}00349\ \ \ \ \ \ \ \ \ m\_license\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00350}00350\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00351}00351\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hoursLeft\ ==\ -\/1)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00352}00352\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ full\ license}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ SLIC\_MEDIA\_SOFT\ =\ 1}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00355}00355\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ SLIC\_MEDIA\_DONGLE=\ 2}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (licMedia\ ==\ 1)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_licInfoE\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Full\ License\ -\/\ Softkey"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_licInfoG\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Volllizenz"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfbacab3f74691849a140395b0fdf668c1b4}{EnumTraceLevel\_INF}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Full\ License\ -\/\ Softkey"{}})));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00361}00361\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00362}00362\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (licMedia\ ==\ 2)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00364}00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_licInfoE\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Full\ License\ -\/\ Dongle"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_licInfoG\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Volllizenz\ -\/\ Dongle"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00366}00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfbacab3f74691849a140395b0fdf668c1b4}{EnumTraceLevel\_INF}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Full\ license\ -\/\ Dongle"{}})));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00367}00367\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00368}00368\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00369}00369\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_licInfoE\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Full\ license\ -\/\ Interface"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00371}00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_licInfoG\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Volllizenz\ -\/\ Interface"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00372}00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfbacab3f74691849a140395b0fdf668c1b4}{EnumTraceLevel\_INF}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Full\ license\ -\/\ Interface"{}})));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00374}00374\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00375}00375\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00376}00376\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00377}00377\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ad9c84d79ee3d11b5cd05d6e37c9499d4}{tstringstream}}\ tss;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ \ tss\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Temporary\ License\ -\/\ "{}})\ <<\ hoursLeft\ /\ 24\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}day(s)\ and\ "{}})\ <<\ hoursLeft\ \%\ 24\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}hour(s)\ left"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00379}00379\ \ \ \ \ \ \ \ \ \ \ \ \ m\_licInfoE\ =\ tss.str();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00380}00380\ \ \ \ \ \ \ \ \ \ \ \ \ tss\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Zeitbeschrnkte\ Lizenz\ -\/\ "{}})\ <<\ hoursLeft\ /\ 24\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Tag(e)\ und\ "{}})\ <<\ hoursLeft\ \%\ 24\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Stunde(n)\ brig"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00381}00381\ \ \ \ \ \ \ \ \ \ \ \ \ m\_licInfoG\ =\ tss.str();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00382}00382\ \ \ \ \ \ \ \ \ \ \ \ \ tss\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Temporary\ license\ -\/\ "{}})\ <<\ hoursLeft\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}hours\ left"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00383}00383\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfbacab3f74691849a140395b0fdf668c1b4}{EnumTraceLevel\_INF}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (TCHAR*)tss.str().c\_str());}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00384}00384\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00385}00385\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00386}00386\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_license;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00387}00387\ \ \ \ \ \}\ \textcolor{comment}{//\ if\ (lic\ ==\ SLIC\_OK)}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00388}00388\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00389}00389\ \ \ \ \ m\_license\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00390}00390\ \ \ \ \ m\_licInfoE\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Demo\ License"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00391}00391\ \ \ \ \ m\_licInfoG\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Demolizenz"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00392}00392\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00393}00393\ \ \ \ \ \textcolor{comment}{//"{}normal"{}\ errors:}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00394}00394\ \ \ \ \ \textcolor{comment}{//\ \#define\ SLIC\_ERR\_NO\_COMP\_FOUND\ \ \ 20}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00395}00395\ \ \ \ \ \textcolor{comment}{//\ \#define\ SLIC\_ERR\_NO\_LIC\_FOUND\ \ \ \ 21}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00396}00396\ \ \ \ \ \textcolor{comment}{//\ \#define\ SLIC\_ERR\_TMPLIC\_EXPIRED\ \ 22}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00397}00397\ \ \ \ \ \textcolor{keywordflow}{switch}\ (lic)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00398}00398\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00399}00399\ \ \ \ \ \textcolor{keywordflow}{case}\ 20:}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00400}00400\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfba01cb27a81a1ad4dda1bc8ce25122c625}{EnumTraceLevel\_ERR}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Component\ not\ found"{}})));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00401}00401\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00402}00402\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00403}00403\ \ \ \ \ \textcolor{keywordflow}{case}\ 21:}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00404}00404\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfbaaad54fdcf73f65c1a54dce1d24011ba9}{EnumTraceLevel\_WRN}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}No\ license\ found"{}})));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00405}00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00406}00406\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00407}00407\ \ \ \ \ \textcolor{keywordflow}{case}\ 22:}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00408}00408\ \ \ \ \ \ \ \ \ m\_licInfoE\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Demo\ License\ -\/\ Temporary\ License\ Expired"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00409}00409\ \ \ \ \ \ \ \ \ m\_licInfoG\ =\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Demolizenz\ -\/\ zeitbeschrnkte\ Lizenz\ abgelaufen"{}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00410}00410\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfbaaad54fdcf73f65c1a54dce1d24011ba9}{EnumTraceLevel\_WRN}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (\mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Demo\ License\ -\/\ Temporary\ License\ Expired"{}})));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00411}00411\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00412}00412\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00413}00413\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00414}00414\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00415}00415\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ad9c84d79ee3d11b5cd05d6e37c9499d4}{tstringstream}}\ tss;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00416}00416\ \ \ \ \ \ \ \ \ tss\ <<\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}Fatal\ Error\ (\%d)"{}})\ <<\ lic;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00417}00417\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_afc39679c897c0d37a609d3aa84365225}{trace}}(\mbox{\hyperlink{_trace_8h_aba471dcec7321e71bb8beba164e6acfba01cb27a81a1ad4dda1bc8ce25122c625}{EnumTraceLevel\_ERR}},\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8h_abec1f4c0f119cf5129a61b309dfe3daf}{TraceGroup\_LICENSE}},\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}LICENSE"{}}),\ (TCHAR*)tss.str().c\_str());}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00418}00418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00419}00419\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00420}00420\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00421}00421\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00422}00422\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_license;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00423}00423\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00424}00424\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00425}\mbox{\hyperlink{class_opc_server_a2d8203047136a3a49cf30f6d2e36e2c0}{00425}}\ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\&\ \mbox{\hyperlink{class_opc_server_a2d8203047136a3a49cf30f6d2e36e2c0}{OpcServer::getLicenseInfo}}(\textcolor{keywordtype}{bool}\ english)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00426}00426\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00427}00427\ \ \ \ \ \textcolor{keywordflow}{if}\ (english)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00428}00428\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00429}00429\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_licInfoE;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00430}00430\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00431}00431\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00432}00432\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00433}00433\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_licInfoG;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00434}00434\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00435}00435\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00436}00436\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00437}00437\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00438}\mbox{\hyperlink{class_opc_server_ac2c61959cf245f59f84ede3a8dcb675f}{00438}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_opc_server_ac2c61959cf245f59f84ede3a8dcb675f}{OpcServer::updateLicenseTimerProc}}(HWND\ hParent,\ UINT\ uMsg,\ UINT\ uEventID,\ DWORD\ dwTimer)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00439}00439\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00440}00440\ \ \ \ \ \mbox{\hyperlink{_update_mode_2_opc_server_8h_a345f92ed4d179fc11dc6711d0016c04c}{getOpcServer}}()-\/>\mbox{\hyperlink{class_opc_server_a5a1f4edb564e9cac54e8950c115cf573}{updateLicense}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00441}00441\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00442}00442\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00443}\mbox{\hyperlink{class_opc_server_a5a1f4edb564e9cac54e8950c115cf573}{00443}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_opc_server_a5a1f4edb564e9cac54e8950c115cf573}{OpcServer::updateLicense}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00444}00444\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00445}00445\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_opc_server_ad9538b59a9b2436a94d06d9b0dbed165}{isLicensed}}())}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00446}00446\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00447}00447\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_opc_server_a6a795d91f48991b93fdecafa410aecee}{checkLicense}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00448}00448\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00449}00449\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_opc_server_ad9538b59a9b2436a94d06d9b0dbed165}{isLicensed}}())}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00450}00450\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00451}00451\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ server\ licensed}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00452}00452\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00453}00453\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00454}00454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((!\mbox{\hyperlink{class_opc_server_ad9538b59a9b2436a94d06d9b0dbed165}{isLicensed}}()))}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00455}00455\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00456}00456\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ license\ was\ removed\ -\/>\ force\ demo\ mode}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00457}00457\ \ \ \ \ \ \ \ \ \ \ \ \ m\_startTimeDemoMode.\mbox{\hyperlink{class_date_time_aa70ef82da8b39a333d7c0256ef6c1bfc}{now}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00458}00458\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a1c3eee898c6599c9b418a01c811962ca}{forceDemoVersion}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00459}00459\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00460}00460\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00461}00461\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00462}00462\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_opc_server_ad9538b59a9b2436a94d06d9b0dbed165}{isLicensed}}())}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00463}00463\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00464}00464\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ no\ license\ -\/>\ demo\ mode}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00465}00465\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_date_time}{DateTime}}\ \mbox{\hyperlink{_c_09_09_2samples_2server_2_update_mode_2_console_8cpp_ac023874b2154eac7297a7575008605fe}{now}};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00466}00466\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_c_09_09_2samples_2server_2_update_mode_2_console_8cpp_ac023874b2154eac7297a7575008605fe}{now}}.\mbox{\hyperlink{class_date_time_aa70ef82da8b39a333d7c0256ef6c1bfc}{now}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00467}00467\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{long}\ timeElapsed\ =\ \mbox{\hyperlink{_c_09_09_2samples_2server_2_update_mode_2_console_8cpp_ac023874b2154eac7297a7575008605fe}{now}}.\mbox{\hyperlink{class_date_time_ac73cda916ba051fbea1cccd4fea5e9c7}{getMicroseconds}}()\ -\/\ m\_startTimeDemoMode.\mbox{\hyperlink{class_date_time_ac73cda916ba051fbea1cccd4fea5e9c7}{getMicroseconds}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00468}00468\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ elapsed;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00469}00469\ \ \ \ \ \ \ \ \ elapsed\ =\ (timeElapsed\ >\ 5400000000);\ \textcolor{comment}{//\ 90\ minutes}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00470}00470\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_o_s_compat_8h_ae3cdb259224c52f39057157adfb0c854}{tstring}}\ serviceName\ =\ \mbox{\hyperlink{_server_application_8cpp_ac7e4f6dc61cc99c81826a2b43034724e}{getApp}}()-\/>\mbox{\hyperlink{class_softing_o_p_c_toolbox_server_1_1_application_a476eaea66ea5bec8fc3e43c0b0658c8e}{getServiceName}}();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00471}00471\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00472}00472\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!m\_shownDemoElapsed)\ \&\&\ (elapsed)\ \&\&\ (serviceName.size()\ ==\ 0))}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00473}00473\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00474}00474\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ show\ elapsed\ message}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00475}00475\ \ \ \ \ \ \ \ \ \ \ \ \ m\_shownDemoElapsed\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00476}00476\ \ \ \ \ \ \ \ \ \ \ \ \ MessageBox(NULL,\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}The\ XX\ OPC\ Server\ was\ running\ under\ the\ demo\ license\(\backslash\)nThe\ demo\ runtime\ of\ 90\ minutes\ is\ elapsed."{}}),\ \mbox{\hyperlink{_o_s_compat_8h_ae936e4c15227768f7da4e0951def89c8}{\_T}}(\textcolor{stringliteral}{"{}S7/S5\ OPC\ Server:\ Demo\ license"{}}),\ MB\_ICONSTOP\ |\ MB\_OK\ \ |\ MB\_TOPMOST\ |\ MB\_SETFOREGROUND);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00477}00477\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00478}00478\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00479}00479\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((elapsed)\ \&\&\ (m\_serverDemoEvent\ ==\ 0))}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00480}00480\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00481}00481\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ allow\ everyone\ to\ access\ the\ event}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00482}00482\ \ \ \ \ \ \ \ \ \ \ \ \ SECURITY\_DESCRIPTOR\ sd;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00483}00483\ \ \ \ \ \ \ \ \ \ \ \ \ InitializeSecurityDescriptor(\&sd,\ SECURITY\_DESCRIPTOR\_REVISION);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00484}00484\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_not_quite_null_dacl}{NotQuiteNullDacl}}\ Dacl;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00485}00485\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00486}00486\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Dacl.\mbox{\hyperlink{class_not_quite_null_dacl_a90c98b21463366b03a5fe1cbd96770c9}{Create}}())}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00487}00487\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00488}00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SetSecurityDescriptorDacl(\&sd,\ TRUE,\ Dacl.\mbox{\hyperlink{class_not_quite_null_dacl_a7772f68b70c2743e442c0aef94ca0aea}{GetPDACL}}(),\ FALSE);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00489}00489\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00490}00490\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00491}00491\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00492}00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SetSecurityDescriptorDacl(\&sd,\ TRUE,\ 0,\ FALSE);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00493}00493\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00494}00494\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00495}00495\ \ \ \ \ \ \ \ \ \ \ \ \ SECURITY\_ATTRIBUTES\ sa\ =\ \{\textcolor{keyword}{sizeof}\ sa,\ \&sd,\ FALSE\};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00496}00496\ \ \ \ \ \ \ \ \ \ \ \ \ m\_serverDemoEvent\ =\ CreateEvent(\&sa,\ TRUE,\ TRUE,\ \mbox{\hyperlink{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_a379062fa3967a55e54d24a737d17913d}{DEMO\_EVENT\_NAME}});}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00497}00497\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00498}00498\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00499}00499\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00500}00500\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00501}00501\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00502}00502\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00503}00503\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00504}00504\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00505}00505\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00508}00508\ \textcolor{comment}{//\ Construction/Destruction}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00511}\mbox{\hyperlink{class_not_quite_null_dacl_af61340aee6ef2a936b234a41bdccca5c}{00511}}\ \mbox{\hyperlink{class_not_quite_null_dacl_af61340aee6ef2a936b234a41bdccca5c}{NotQuiteNullDacl::NotQuiteNullDacl}}()}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00512}00512\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00513}00513\ \ \ \ \ m\_pEveryoneSid\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00514}00514\ \ \ \ \ m\_pDACL\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00515}00515\ \ \ \ \ m\_dwErr\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00516}00516\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00517}00517\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00518}\mbox{\hyperlink{class_not_quite_null_dacl_a60f58fc3b913f595d3f1cb17b008cc01}{00518}}\ \mbox{\hyperlink{class_not_quite_null_dacl_a60f58fc3b913f595d3f1cb17b008cc01}{NotQuiteNullDacl::\string~NotQuiteNullDacl}}()}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00519}00519\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00520}00520\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pDACL\ !=\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00521}00521\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00522}00522\ \ \ \ \ \ \ \ \ ::HeapFree(GetProcessHeap(),\ 0,\ m\_pDACL);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00523}00523\ \ \ \ \ \ \ \ \ m\_pDACL\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00524}00524\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00525}00525\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00526}00526\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pEveryoneSid\ !=\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00527}00527\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00528}00528\ \ \ \ \ \ \ \ \ ::FreeSid(m\_pEveryoneSid);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00529}00529\ \ \ \ \ \ \ \ \ m\_pEveryoneSid\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00530}00530\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00531}00531\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00532}00532\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00533}00533\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00536}00536\ \textcolor{comment}{//\ Public\ methods}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00539}00539\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00540}00540\ \textcolor{comment}{//********************************************************************}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00541}00541\ \textcolor{comment}{//\ Create\ -\/-\/\ All\ the\ real\ work\ of\ creating\ the\ DACL\ gets\ done\ here}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00542}00542\ \textcolor{comment}{//\ rather\ than\ in\ the\ constructor,\ so\ we\ can\ return\ a}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00543}00543\ \textcolor{comment}{//\ success/failure\ status}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00544}00544\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00545}\mbox{\hyperlink{class_not_quite_null_dacl_a90c98b21463366b03a5fe1cbd96770c9}{00545}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_not_quite_null_dacl_a90c98b21463366b03a5fe1cbd96770c9}{NotQuiteNullDacl::Create}}()}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00546}00546\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00547}00547\ \ \ \ \ \textcolor{keywordtype}{bool}\ bCreateOk\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00548}00548\ \ \ \ \ m\_dwErr\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00549}00549\ \ \ \ \ \textcolor{comment}{//\ need\ a\ SID\ for\ the\ Everyone\ group}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00550}00550\ \ \ \ \ \textcolor{keywordtype}{bool}\ bEveryoneSID\ =\ CreateEveryoneSid();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00551}00551\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00552}00552\ \ \ \ \ \textcolor{keywordflow}{if}\ (bEveryoneSID)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00553}00553\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00554}00554\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ calculate\ a\ size\ for\ the\ DACL\ we're\ going\ to\ use}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00555}00555\ \ \ \ \ \ \ \ \ ULONG\ lACLSize\ =\ CalculateAclSize();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00556}00556\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00557}00557\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lACLSize\ >\ 0)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00558}00558\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00559}00559\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Allocate\ memory\ for\ the\ ACL}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00560}00560\ \ \ \ \ \ \ \ \ \ \ \ \ m\_pDACL\ =\ (PACL)::HeapAlloc(GetProcessHeap(),\ 0,\ lACLSize);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00561}00561\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00562}00562\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pDACL\ !=\ NULL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00563}00563\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00564}00564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ initialize\ the\ actual\ ACL}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00565}00565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ BOOL\ bInitACL\ =\ ::InitializeAcl(m\_pDACL,\ lACLSize,\ ACL\_REVISION);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00566}00566\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00567}00567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bInitACL)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00568}00568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00569}00569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ the\ ACEs\ that\ deny/grant\ the\ accesses\ we're\ after}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00570}00570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bCreateOk\ =\ AddNotQuiteNullAces();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00571}00571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00572}00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00573}00573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00574}00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_dwErr\ =\ ::GetLastError();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00575}00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00576}00576\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00577}00577\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00578}00578\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00579}00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_dwErr\ =\ ::GetLastError();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00580}00580\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00581}00581\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00582}00582\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00583}00583\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00584}00584\ \ \ \ \ \textcolor{keywordflow}{return}\ bCreateOk;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00585}00585\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00586}00586\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00589}00589\ \textcolor{comment}{//\ Private\ methods}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00592}00592\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00593}00593\ \textcolor{comment}{//********************************************************************}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00594}00594\ \textcolor{comment}{//\ CreateEveryoneSid\ -\/-\/\ Create\ a\ SID\ for\ the\ built-\/in\ "{}Everyone"{}\ group}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00595}00595\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00596}00596\ \textcolor{keywordtype}{bool}\ NotQuiteNullDacl::CreateEveryoneSid()}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00597}00597\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00598}00598\ \ \ \ \ \textcolor{keywordtype}{bool}\ bSidOk\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00599}00599\ \ \ \ \ m\_dwErr\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00600}00600\ \ \ \ \ SID\_IDENTIFIER\_AUTHORITY\ SidAuth\ =\ SECURITY\_WORLD\_SID\_AUTHORITY;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00601}00601\ \ \ \ \ BOOL\ bAllocAndInitOk\ =\ ::AllocateAndInitializeSid(\&SidAuth,\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ authority}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00602}00602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ count\ of\ subauthorities\ used}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00603}00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SECURITY\_WORLD\_RID,\ \ \textcolor{comment}{//\ subauthority\ we're\ using}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00604}00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ 0,\ 0,\ 0,\ 0,\ 0,\ 0,\ \textcolor{comment}{//\ seven\ unused\ subauthorities}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00605}00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&m\_pEveryoneSid);\ \ \ \ \textcolor{comment}{//\ pointer\ to\ receive\ the\ new\ SID}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00606}00606\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00607}00607\ \ \ \ \ \textcolor{keywordflow}{if}\ (bAllocAndInitOk)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00608}00608\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00609}00609\ \ \ \ \ \ \ \ \ bSidOk\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00610}00610\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00611}00611\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00612}00612\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00613}00613\ \ \ \ \ \ \ \ \ m\_dwErr\ =\ ::GetLastError();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00614}00614\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00615}00615\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00616}00616\ \ \ \ \ \textcolor{keywordflow}{return}\ bSidOk;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00617}00617\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00618}00618\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00619}00619\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00620}00620\ \textcolor{comment}{//********************************************************************}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00621}00621\ \textcolor{comment}{//\ CalculateAclSize\ -\/-\/\ This\ method\ calculates\ the\ size\ of\ the\ ACL\ we}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00622}00622\ \textcolor{comment}{//\ are\ about\ to\ create.}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00623}00623\ \textcolor{comment}{//\ NB:\ \ This\ is\ just\ a\ special-\/purpose\ version\ based\ on}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00624}00624\ \textcolor{comment}{//\ "{}Ask\ Dr.\ Gui\ \#49"{}.\ \ A\ more\ general\ method\ is}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00625}00625\ \textcolor{comment}{//\ outlined\ in\ Richter/Clark,\ Chapter\ 10,\ page\ 455.\ \ This\ is}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00626}00626\ \textcolor{comment}{//\ sufficient\ for\ the\ purpose\ of\ creating\ our\ NotQuiteNullDacl\ but}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00627}00627\ \textcolor{comment}{//\ not\ for\ creating\ more\ general\ ACLs.}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00628}00628\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00629}00629\ ULONG\ NotQuiteNullDacl::CalculateAclSize()}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00630}00630\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00631}00631\ \ \ \ \ ULONG\ lACLSize\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00632}00632\ \ \ \ \ m\_dwErr\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00633}00633\ \ \ \ \ \textcolor{comment}{//\ validate\ that\ SID\ we\ created,\ just\ to\ be\ sure}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00634}00634\ \ \ \ \ BOOL\ bSIDOk\ =\ ::IsValidSid(m\_pEveryoneSid);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00635}00635\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00636}00636\ \ \ \ \ \textcolor{keywordflow}{if}\ (bSIDOk)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00637}00637\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00638}00638\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we're\ using\ that\ SID\ twice}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00639}00639\ \ \ \ \ \ \ \ \ lACLSize\ +=\ (::GetLengthSid(m\_pEveryoneSid)\ *\ 2);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00640}00640\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we're\ using\ one\ access\ allowed\ ace\ and\ one\ access\ denied}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00641}00641\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ substract\ the\ length\ of\ the\ sidstart\ member\ which}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00642}00642\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ already\ counted\ in\ the\ sid\ lengths\ above}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00643}00643\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (See\ the\ Initialize\ ACL\ documentation\ for\ more\ info.)}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00644}00644\ \ \ \ \ \ \ \ \ lACLSize\ +=\ (\textcolor{keyword}{sizeof}(ACCESS\_ALLOWED\_ACE)\ -\/\ \textcolor{keyword}{sizeof}(((ACCESS\_ALLOWED\_ACE*)0)-\/>SidStart));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00645}00645\ \ \ \ \ \ \ \ \ lACLSize\ +=\ (\textcolor{keyword}{sizeof}(ACCESS\_DENIED\_ACE)\ -\/\ \textcolor{keyword}{sizeof}(((ACCESS\_DENIED\_ACE*)0)-\/>SidStart));}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00646}00646\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ and\ we\ need\ to\ add\ in\ the\ size\ of\ the\ acl\ itself}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00647}00647\ \ \ \ \ \ \ \ \ lACLSize\ +=\ \textcolor{keyword}{sizeof}(ACL);}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00648}00648\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00649}00649\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00650}00650\ \ \ \ \ \textcolor{comment}{//\ else\ -\/-\/\ there's\ no\ extended\ error\ info\ to\ get}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00651}00651\ \ \ \ \ \textcolor{keywordflow}{return}\ lACLSize;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00652}00652\ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00653}00653\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00654}00654\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00655}00655\ \textcolor{comment}{//********************************************************************}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00656}00656\ \textcolor{comment}{//\ AddNotQuiteNullAces\ -\/-\/\ Add\ the\ two\ ACEs\ to\ the\ DACL}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00657}00657\ \textcolor{comment}{//\ NB:\ \ Note\ that\ the\ order\ of\ execution\ is\ critical\ here.}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00658}00658\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00659}00659\ \textcolor{keywordtype}{bool}\ NotQuiteNullDacl::AddNotQuiteNullAces()}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00660}00660\ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00661}00661\ \ \ \ \ \textcolor{keywordtype}{bool}\ bAddedOk\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00662}00662\ \ \ \ \ m\_dwErr\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00663}00663\ \ \ \ \ BOOL\ bAddAce;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00664}00664\ \ \ \ \ \textcolor{comment}{//\ Add\ an\ ace\ that\ denies\ WRITE\_OWNER\ and\ WRITE\_DAC\ to\ 'everyone'}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00665}00665\ \ \ \ \ \textcolor{comment}{//\ which\ denies\ everyone\ but\ the\ owner\ of\ the\ associated\ object}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00666}00666\ \ \ \ \ \textcolor{comment}{//\ access\ to\ the\ object's\ security.}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00667}00667\ \ \ \ \ bAddAce\ =\ ::AddAccessDeniedAce(m\_pDACL,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ acl\ to\ add\ the\ ace\ to}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00668}00668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ACL\_REVISION,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ revision,\ must\ be\ ACL\_REVISION}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00669}00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ WRITE\_OWNER\ |\ WRITE\_DAC,\ \ \ \textcolor{comment}{//\ accesses\ to\ deny}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00670}00670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pEveryoneSid);\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ SID\ to\ be\ denied\ (everyone)}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00671}00671\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00672}00672\ \ \ \ \ \textcolor{keywordflow}{if}\ (bAddAce)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00673}00673\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00674}00674\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Add\ an\ ace\ that\ gives\ 'everyone'\ all\ accesses\ to\ the\ object.}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00675}00675\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ By\ itself,\ the\ bit\ of\ code\ below\ would\ be\ the\ moral\ equivalent}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00676}00676\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ of\ a\ NULL\ DACL\ -\/-\/\ it\ gives\ all\ rights\ to\ everyone.\ \ But,\ because}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00677}00677\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ accesses\ are\ evaluating\ in\ order\ of\ their\ placement\ in\ the\ DACL}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00678}00678\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ DeniedACE\ above\ acts\ as\ a\ filter,\ before\ this\ can\ be\ evaluated.}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00679}00679\ \ \ \ \ \ \ \ \ bAddAce\ =\ ::AddAccessAllowedAce(m\_pDACL,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ acl\ to\ add\ the\ ace\ to}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00680}00680\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ACL\_REVISION,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ revision,\ must\ be\ ACL\_REVISION}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00681}00681\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GENERIC\_ALL,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ accesses\ to\ allow}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00682}00682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_pEveryoneSid);\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ SID\ to\ be\ allowed}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00683}00683\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00684}00684\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bAddAce)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00685}00685\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00686}00686\ \ \ \ \ \ \ \ \ \ \ \ \ bAddedOk\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00687}00687\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00688}00688\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00689}00689\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00690}00690\ \ \ \ \ \textcolor{keywordflow}{if}\ (!bAddedOk)}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00691}00691\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00692}00692\ \ \ \ \ \ \ \ \ m\_dwErr\ =\ ::GetLastError();}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00693}00693\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00694}00694\ }
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00695}00695\ \ \ \ \ \textcolor{keywordflow}{return}\ bAddedOk;}
\DoxyCodeLine{\Hypertarget{_softing_server_2src_2_x_x_o_p_c_2_opc_server_8cpp_source_l00696}00696\ \}}

\end{DoxyCode}
